requirejs.config({baseUrl:"js/krusty-minimal"});define(["libs/springfield/QuickStartConnector","app/QSResponseParser","app/VideoElementCreator","app/AudioElementCreator"],function(d,c,a,b){(function(j){var i=null;var f=null;var h=null;jQuery.fn.krusty=function(k){if(e[k]){console.log(e);return e[k].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof k==="object"||!k){return e.init.apply(this,arguments)}else{j.error("Method "+k+" does not exist on jQuery.krustyMinimal")}}};function g(l,k){k.on("loadstart",function(){j(l).trigger("loadstart")});k.on("playing",function(){j(l).trigger("playing")});k.on("pause",function(){j(l).trigger("pause")})}var e={init:function(l){var k=this;var m=d({uri:l.uri,success:function(q){var t=c({data:q,ticket:l.ticket,starttime:l.start});var o=t.getVideos();var n=t.getAudios();var s=t.getPlayMode();var r=t.getScreenshot();if(l.ticket!=null){r=r+"?ticket="+l.ticket}var p;if(n.length>0){p=b({audios:n,quality:l.quality,ticket:l.ticket,playMode:s,starttime:l.start})}else{p=a({videos:o,quality:l.quality,ticket:l.ticket,playMode:s,starttime:l.start})}i=p.create();g(k,i);i.width(j(k)[0].clientWidth);i.height(j(k)[0].clientHeight);f=j(document.createElement("img"));if(n.length>0){f.attr("src","img/audio.png")}else{f.attr("src",r)}f.attr("class","bgImage");f.attr("width",j(k)[0].clientWidth);f.attr("height",j(k)[0].clientHeight);h=j(document.createElement("div"));h.attr("class","playIcon");h.on("click",function(){i[0].play()});i.on("play",function(){h.hide();if(n.length==0){f.hide()}});j(k).append(i);if(s=="continuous"){j(k).append(f);j(k).append(h)}else{j("#menuicon").show();if(n.length>0){j(k).append(f)}}h.css("left",((i.width()/2)-(h.width()/2))+"px");h.css("top",((i.height()/2)-(h.height()/2))+"px");j("#seek-bar").css("width",(j("#videoplayer").width()-365)+"px")}})},resize:function(){i.width(j(self)[0].clientWidth);i.height(j(self)[0].clientHeight);f.attr("width",i[0].clientWidth);f.attr("height",i[0].clientHeight);h.css("left",((i.width()/2)-(h.width()/2))+"px");h.css("top",((i.height()/2)-(h.height()/2))+"px")}};jQuery.holdReady(false)})(jQuery)});