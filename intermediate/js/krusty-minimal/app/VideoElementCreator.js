define(["libs/jquery.browser.mobile"],function(){var a=function(d){var c={};var e={videos:null,quality:"360p",currentOrder:null,order:{mobile:["360p","180p","720p","1080p"],desktop:["720p","1080p","720p","1080p"]},};$.extend(e,d);c.create=function(){var i=$(document.createElement("video"));i.attr("controls","controls");var k=f();var j=g(k.codecs,"video/mp4");if(j.streamSrc!==undefined){var h=$(document.createElement("source"));h.attr("src",j.streamSrc);h.attr("type",j.type);i.append(h)}k=$(document.createElement("source"));k.attr("src",j.src);k.attr("type",j.type);i.append(k);return i};var f=function(){var i=null;if(e.videos.length>1){if(e.quality){var h=$.grep(e.videos,function(j){if(j.quality===e.quality){return j}});i=h[0]}else{$.each(e.currentOrder,function(j,k){i=$.grep(e.videos,function(l){if(l.quality==k){return l}});if(i.length>0){i=i[0];return false}})}}else{i=e.videos[0]}return i};var g=function(h,i){return $.grep(h,function(j){if(j.type==i){return j}})[0]};var b=function(){e.currentOrder=e.order.desktop;if($.browser.mobile){e.currentOrder=e.order.mobile}};b();return c};return a});